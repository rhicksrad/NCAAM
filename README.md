NBA Intelligence Hub
Web experience

Multi-page app with a shared header and routed sections:

index.html landing + season-preview content. 
rhicksrad.github.io

players.html player intelligence hub (WIP scaffold). 
rhicksrad.github.io

teams.html team systems/benchmarks (WIP scaffold). 
rhicksrad.github.io

history.html archive/legends and historical visuals (WIP scaffold). 
rhicksrad.github.io

insights.html experimental “Insights Lab” prototypes. 
rhicksrad.github.io

Pages load shared assets from /assets/js and JSON from /public/data. No hardcoded rosters in HTML.

Agents & rules (summary; see agents.md for full policy)

Active season: 2025–26. Most recently completed: 2024–25. Make this explicit in outputs.

No binaries in the repo. UTF-8 text with trailing newlines.

Quickstart

Node 20, pnpm 9.

pnpm install

Local dev: serve /public so pages can fetch /public/data/*.json.

Rosters data (players page)

Runtime source: /public/data/rosters.json generated by pnpm fetch:active-rosters (see agents.md).

The players.html page must render from /public/data/rosters.json and never ship season-locked rosters.
rhicksrad.github.io

Set `BDL_API_KEY` (aliases: `BALLDONTLIE_API_KEY`, `BALL_DONT_LIE_API_KEY`) to your Ball Don't Lie All-Star key before running any fetch or build scripts. The repository no longer includes a default key. You can also drop the key in `secrets/bdl_api_key` (or `bdl_api_key.txt`), which the data pipeline now reads automatically if no environment variable is present.

A scheduled job refreshes rosters and deploys if content hashes change.

CI/CD

GitHub Pages deployment with pnpm + corepack. One installer path only.

Build job order:

Install node/pnpm

Fetch/refresh data (rosters, snapshots)

Validate schemas and counts

Build site assets

Upload Pages artifact

Deploy job publishes artifact to GitHub Pages.

Snapshots

Front-end snapshot

node scripts/build_snapshot.mjs → public/data/active_franchises.json

Schedule snapshot (upcoming season)

python scripts/fetch_schedule_from_bref.py → LeagueSchedule25_26.csv

node scripts/build_schedule_snapshot.mjs → public/data/schedule_snapshot.json

Insight snapshots (players, games, teams)

python scripts/build_insights.py →
public/data/players_overview.json,
public/data/historic_games.json,
public/data/team_performance.json,
public/data/player_leaders.json,
public/data/player_season_insights.json

Team profile snapshot (map experience)

python scripts/build_team_profiles.py → public/data/team_profiles.json

Phase 1 — data plumbing

python scripts/phase1_pipeline.py

Outputs:

public/data/league_directory.json

public/data/historical_audit.json

Offline dev fixtures in scripts/testdata/.

Data dictionary conventions

Types: int whole numbers, float decimals, string UTF-8, date ISO-8601, enum constrained vocabulary.

Nulls: blanks represent NA; treat numeric blanks as missing.

Identifiers: personId, teamId, gameId are strings (preserve leading zeros).

Core datasets (storage notes)

Players.csv, Games.csv, TeamHistories.csv, LeagueSchedule24_25.csv live at repo root and are ≤ 25 MB.

PlayerStatistics.7z and TeamStatistics.zip produce larger CSVs; shard future commits:

PlayerStatistics/season=YYYY/part-*.csv

TeamStatistics/season=YYYY/part-*.csv

Each shard ≤ 25 MB.

Until sharding is complete, extract locally and consume monolithic CSVs in pipelines.

Contributor checklist

ruff check . and pytest for Python changes.

No top-level side effects in helper modules; keep scripts importable.

Never invent data. Always regenerate from pipeline + overrides.

Keep season framing explicit in all outputs.

## CI smoke test
```bash
export BALLDONTLIE_API_KEY=sk_xxx
pnpm i --frozen-lockfile
pnpm verify:bdl
```
