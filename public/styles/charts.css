/* public/styles/charts.css */
:root {
  --chart-font-family: "Inter", "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;
  --chart-font-size: 13;
  --chart-line-width: 1.5;
  --chart-grid-width: 1;
  --chart-grid-alpha: 0.28;
  --chart-bar-radius: 8;
  --chart-legend-dot-size: 10;
  --chart-tooltip-bg: rgba(11, 37, 69, 0.88);
  --chart-tooltip-fg: #f8fafc;
  --chart-fg: #102a43;
  --chart-fg-muted: #486581;
  --chart-bg: #ffffff;
  --chart-grid: #d9e2ec;
  --chart-accent: #1b998b;
  --chart-accent-muted: #cde1de;
  --chart-categorical-0: #0d3b66;
  --chart-categorical-1: #ef8354;
  --chart-categorical-2: #2a9d8f;
  --chart-categorical-3: #8ab17d;
  --chart-categorical-4: #f4d35e;
  --chart-categorical-5: #e36414;
  --chart-categorical-6: #4f5d75;
  --chart-categorical-7: #9a031e;
  --chart-categorical-8: #577590;
  --chart-categorical-9: #bc4749;
  --chart-categorical-10: #3a86ff;
  --chart-categorical-11: #8338ec;
  --chart-sequential-cool-0: #d9ed92;
  --chart-sequential-cool-1: #99d98c;
  --chart-sequential-cool-2: #52b69a;
  --chart-sequential-cool-3: #168aad;
  --chart-sequential-cool-4: #1a759f;
  --chart-sequential-cool-5: #1e6091;
  --chart-sequential-warm-0: #ffe5d9;
  --chart-sequential-warm-1: #ffc9b9;
  --chart-sequential-warm-2: #ffb4a2;
  --chart-sequential-warm-3: #e5989b;
  --chart-sequential-warm-4: #b5838d;
  --chart-sequential-warm-5: #6d597a;
}

[data-theme="dark"] {
  --chart-grid-alpha: 0.24;
  --chart-tooltip-bg: rgba(9, 20, 36, 0.92);
  --chart-tooltip-fg: #f1f5f9;
  --chart-fg: #f0f4f8;
  --chart-fg-muted: #9fb3c8;
  --chart-bg: #0b1f2a;
  --chart-grid: #1f3a52;
  --chart-accent: #4ecdc4;
  --chart-accent-muted: #1f3a52;
  --chart-categorical-0: #4ecdc4;
  --chart-categorical-1: #ff6b6b;
  --chart-categorical-2: #ffe66d;
  --chart-categorical-3: #1a535c;
  --chart-categorical-4: #5f0f40;
  --chart-categorical-5: #9a031e;
  --chart-categorical-6: #fb8b24;
  --chart-categorical-7: #4361ee;
  --chart-categorical-8: #ffd60a;
  --chart-categorical-9: #adb5bd;
  --chart-categorical-10: #00b4d8;
  --chart-categorical-11: #a2d2ff;
  --chart-sequential-cool-0: #0b7285;
  --chart-sequential-cool-1: #0c8599;
  --chart-sequential-cool-2: #0ca678;
  --chart-sequential-cool-3: #099268;
  --chart-sequential-cool-4: #2b8a3e;
  --chart-sequential-cool-5: #37b24d;
  --chart-sequential-warm-0: #862e9c;
  --chart-sequential-warm-1: #b5179e;
  --chart-sequential-warm-2: #e5383b;
  --chart-sequential-warm-3: #ff6b6b;
  --chart-sequential-warm-4: #ff922b;
  --chart-sequential-warm-5: #ffd43b;
}

svg.chart {
  width: 100%;
  height: 100%;
  display: block;
  background: var(--chart-bg);
  color: var(--chart-fg);
  font-family: var(--chart-font-family);
  font-size: calc(var(--chart-font-size) * 1px);
}

svg.chart text {
  font-family: inherit;
  fill: var(--chart-fg-muted);
}

.axis path,
.axis line {
  shape-rendering: crispEdges;
  stroke: var(--chart-grid);
  stroke-width: calc(var(--chart-grid-width) * 1px);
  stroke-opacity: var(--chart-grid-alpha);
  vector-effect: non-scaling-stroke;
}

.axis text {
  fill: var(--chart-fg-muted);
  font-weight: 500;
  letter-spacing: 0.01em;
}

.axis-label {
  fill: var(--chart-fg);
  font-size: calc(var(--chart-font-size) * 1px);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-weight: 600;
}

.grid line {
  stroke: var(--chart-grid);
  stroke-width: calc(var(--chart-grid-width) * 1px);
  stroke-opacity: var(--chart-grid-alpha);
  vector-effect: non-scaling-stroke;
}

.series {
  transition: opacity 160ms ease, filter 160ms ease;
}

.series--bar:hover,
.series--bar:focus-visible,
.series--area:hover,
.series--area:focus-visible,
.series--line:hover,
.series--line:focus-visible,
.series--scatter:hover,
.series--scatter:focus-visible {
  opacity: 0.92;
}

.legend {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1rem;
  align-items: center;
  font-family: var(--chart-font-family);
  font-size: calc(var(--chart-font-size) * 1px);
  color: var(--chart-fg-muted);
}

.legend-item {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  padding: 0.45rem 0.65rem;
  border-radius: calc(var(--chart-bar-radius, 8) * 1px);
  border: 1px solid color-mix(in srgb, var(--chart-grid) 60%, transparent);
  background: color-mix(in srgb, var(--chart-bg) 94%, transparent);
  color: var(--chart-fg);
  cursor: default;
  outline: none;
}

.legend-item:focus-visible {
  outline: 2px solid var(--chart-accent);
  outline-offset: 2px;
}

.legend-swatch {
  width: calc(var(--chart-legend-dot-size, 10) * 1px);
  height: calc(var(--chart-legend-dot-size, 10) * 1px);
  border-radius: calc(var(--chart-legend-dot-size, 10) * 0.5px);
  stroke: var(--chart-bg);
  stroke-width: calc(var(--chart-line-width) * 0.5px);
}

.legend-label {
  dominant-baseline: middle;
  color: var(--chart-fg-muted);
}

.viz-card {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm, 0.75rem);
  padding: clamp(1rem, 0.9rem + 0.5vw, 1.35rem);
  border-radius: calc(var(--radius-card, 12px) + 6px);
  border: 1px solid color-mix(in srgb, var(--color-ink, #e2e8f0) 14%, transparent);
  background: color-mix(in srgb, var(--color-paper, #0b1524) 92%, transparent);
  box-shadow: 0 18px 46px rgba(8, 15, 28, 0.35);
  position: relative;
}

[data-theme="light"] .viz-card {
  border-color: color-mix(in srgb, var(--color-ink, #0b172a) 10%, transparent);
  background: color-mix(in srgb, var(--color-paper, #ffffff) 96%, transparent);
  box-shadow: 0 18px 42px rgba(15, 23, 42, 0.18);
}

.viz-card__title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: color-mix(in srgb, var(--color-muted, #94a3b8) 78%, white 22%);
}

.viz-card__caption {
  margin: 0;
  font-size: 0.82rem;
  line-height: 1.45;
  color: color-mix(in srgb, var(--color-muted, #94a3b8) 85%, white 15%);
}

.viz-canvas {
  position: relative;
  width: 100%;
  min-height: 240px;
  border-radius: calc(var(--chart-bar-radius, 8) * 1px);
  border: 1px solid color-mix(in srgb, var(--chart-grid) 65%, transparent);
  background: color-mix(in srgb, var(--chart-bg) 96%, transparent);
  overflow: hidden;
}

.viz-canvas > svg {
  width: 100%;
  height: 100%;
  display: block;
}

.tooltip {
  background: var(--chart-tooltip-bg, rgba(11, 37, 69, 0.88));
  color: var(--chart-tooltip-fg, #f8fafc);
  border-radius: calc(var(--chart-bar-radius, 8) * 1px);
  padding: 12px 14px;
  border: 1px solid rgba(16, 42, 67, 0.3);
  box-shadow: 0 22px 44px rgba(8, 15, 28, 0.42);
  font-family: var(--chart-font-family);
  font-size: calc(var(--chart-font-size) * 1px);
  pointer-events: none;
  max-width: 280px;
  z-index: 10;
}

.tooltip:focus {
  outline: 2px solid var(--chart-accent);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .series {
    transition: none;
  }
  .tooltip {
    transition: none !important;
  }
}
